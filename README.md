# LaColaRij

Want Linear.app speeds but still have to use Jira? 
Lacolarij (JiraLocal backwards) is a local-first application for editing JIRA issues offline. It syncs with JIRA Cloud (Server planned for later), stores issues locally in IndexedDB, and allows editing even without network connectivity. Changes are synchronized when online, with manual conflict resolution.

The idea is that you self-host or locally run a Lacolarij instance. You then authenticate
via API-Key with a Jira instance and download all the issues with a sync. Then work on issue
and later sync back your changes.

## LLM use

This project was done as an exploration of LLM capabilities and the current LLM Tool landscape.
So a lot of the code was generated by various LLMs.

Details on the use can be found in the [llm_use/README.md](./docs/llm_use/README.md)

## Project state

It is a proof of Concept at the Moment.
Very basic functionality with JIRA REST API v3 (Jira Cloud) is implemented.
Compatibility with JIRA REST API v2 (Jira Server) is planned but not yet implemented.

## Architecture

The initial plan was to do the whole project as a web-app. But sadly the Jira Cloud API
doesn't have the necessary CORS Headers set to allow this. So all the Jira Requests need
to be relayed to a web-server. This also means that your Jira API Key needs to be stored
on the Server. It is stored securely and encrypted.

This is a rough Diagram of the Architecture:

```
┌────────────────────────────────────────────────────────────────────────────┐
│                              Browser (Frontend)                            │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────────┐│
│  │  React Views │──│ State Manager│──│  Sync Engine │──│ Storage Layer    ││
│  │  (List/Board)│  │ (Zustand)    │  │ (Background) │  │ (IndexedDB/Cache)││
│  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────────┘│
└─────────────────────────────────────────────|──────────────────────────────┘
                                              │ HTTP
┌─────────────────────────────────────────────|───────────────────────────────┐
│                            Backend (Python/FastAPI)                         │
│  ┌──────────────┐  ┌──────────────┐  ┌─────────────────────────────────────┐│
│  │ User Service │  │ Relay Service│──│ Mode Router (relay|demo)            ││
│  │ (Settings)   │  │ (CORS proxy) │  │   ├─ Real JIRA (forward requests)   ││
│  └──────────────┘  └──────────────┘  │   └─ Mock JIRA (local state)        ││
│                                      └─────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────────────────┘
```


## Database

The backend Database only stores User Credentials. Details are listed in the [Database.md](./docs/Database.md)
The actual issues and comments are stored in the Web-App in an IndexedDB Store.

## Deployment

JiraLocal can be deployed using Docker. Two configurations are available:
- **SQLite** - Simple single-file database, suitable for single-user or small deployments
- **PostgreSQL** - Full database server, suitable for production or multi-user environments

### Prerequisites

- Docker and Docker Compose installed
- Port 80 available on the host

### Setup

1. Create an environment file from the template:
   ```bash
   cp .env.docker.example .env.docker
   ```

2. Generate and add the required secrets to `.env.docker`:
   ```bash
   # Generate SECRET_KEY
   python3 -c "import secrets; print(secrets.token_urlsafe(32))"

   # Generate ENCRYPTION_KEY
   python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
   ```

3. Run the Containers

### Running with SQLite

```bash
docker-compose -f deployment/docker-compose.sqlite.yml --env-file .env.docker up --build -d
```

### Running with PostgreSQL

For PostgreSQL, also set `POSTGRES_PASSWORD` in `.env.docker`.
```bash
docker-compose -f deployment/docker-compose.postgres.yml --env-file .env.docker up --build -d
```

### Access

Once running, access the application at http://localhost

### Stopping

```bash
# SQLite
docker-compose -f deployment/docker-compose.sqlite.yml down

# PostgreSQL
docker-compose -f deployment/docker-compose.postgres.yml down

# To also remove volumes (WARNING: deletes all data)
docker-compose -f deployment/docker-compose.sqlite.yml down -v
```
